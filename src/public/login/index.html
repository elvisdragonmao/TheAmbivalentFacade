<!doctype html>
<html lang="zh-Hant-TW">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>管理員登入 | 半嬌面</title>
	<link rel="stylesheet" href="/admin.css" />
	<link rel="stylesheet" href="index.css" />
	<link rel="icon" type="image/png" href="/img/favicon/favicon-96x96.png" sizes="96x96" />
	<link rel="icon" type="image/svg+xml" href="/img/favicon/favicon.svg" />
	<link rel="shortcut icon" href="/img/favicon/favicon.ico" />
	<link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/apple-touch-icon.png" />
	<link rel="manifest" href="/img/favicon/site.webmanifest" />
</head>

<body>
	<div class="container">
		<div class="card" style="max-width: 400px">
			<h1>管理員登入</h1>
			<div id="error" class="error" style="display: none"></div>
			<form id="loginForm">
				<div class="form-group">
					<label for="password">密碼</label>
					<input type="password" id="password" name="password" required autofocus />
				</div>
				<button type="submit" class="btn btn-primary">登入</button>
			</form>
		</div>
	</div>

	<script>
		document.getElementById("loginForm").addEventListener("submit", async e => {
			e.preventDefault();

			const password = document.getElementById("password").value;
			const errorDiv = document.getElementById("error");

			try {
				const response = await fetch("/api/admin/login", {
					method: "POST",
					headers: {
						"Content-Type": "application/json"
					},
					body: JSON.stringify({ password })
				});

				if (response.ok) {
					window.location.href = "/admin";
				} else {
					errorDiv.textContent = "Invalid password";
					errorDiv.style.display = "block";
				}
			} catch (error) {
				errorDiv.textContent = "Login failed";
				errorDiv.style.display = "block";
			}
		});
	</script>
</body>

</html>